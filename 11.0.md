# FreeBSD 11.0-RELEASE 发行说明（2016 年 10 月 10 日）

- 原文链接：[FreeBSD 11.0-RELEASE Release Notes](https://www.freebsd.org/releases/11.0R/relnotes/)

## 摘要

FreeBSD 11.0-RELEASE 的发行说明包含了自 11.0-STABLE 开发线以来对 FreeBSD 基本系统所做的更改摘要。本文列出了自上次发布以来发布的相关安全通告，以及对 FreeBSD 内核和用户空间的重大更改。还简要介绍了升级的相关事项。

## 介绍

本文档包含 FreeBSD 11.0-RELEASE 的发行说明。它描述了 FreeBSD 最近添加、修改或删除的功能，并提供了有关从先前版本的 FreeBSD 升级的一些说明。

此发行版的 FreeBSD 11.0-RELEASE 为 RELEASE 版。可以在[`https://www.FreeBSD.org/releases/`](https://www.freebsd.org/releases/)或其镜像站点找到。有关获取此版本（或其他版本）FreeBSD 的更多信息，请参阅[FreeBSD 手册](https://docs.freebsd.org/en/books/handbook/)中的[获取 FreeBSD 附录](https://docs.freebsd.org/en/books/handbook/#mirrors)。

强烈建议所有用户在安装 FreeBSD 之前查阅发布的错误文档。错误文档会更新与发布周期末期或发布后发现的“突发”信息。通常，它包含已知的 bug、安全通告以及文档更正。FreeBSD 11.0-RELEASE 的最新错误文档可以在 FreeBSD 官方网站上找到。

本文档描述了自 10.3-RELEASE 以来 FreeBSD 中最显著的新增或变更功能。通常，本文所述的更改是特定于 11.0-STABLE 分支的，除非特别标记为已合并功能。

典型的发行说明项记录了自 10.3-RELEASE 发布以来发布的安全通告、新驱动程序或硬件支持、新命令或选项、主要的 bug 修复，或贡献的软件升级。它们还可能列出主要的 Port/包或发布工程实践的更改。显然，发行说明无法列出每个版本间对 FreeBSD 所做的所有更改；本文档主要集中在安全通告、用户可见的更改和主要的架构改进上。

## 重要说明

本节列出了从以前的 FreeBSD 版本升级时的重要信息。

### 用户可见的更改

自 `r303719` 起，默认禁用了 OpenSSH 的 `DSA` 密钥生成。升级前更新 OpenSSH 密钥非常重要。此外，已移除 `Protocol 1` 支持。

## 从旧版 FreeBSD 升级

[amd64, i386] 版本之间的二进制升级（以及各个安全分支的快照）可以使用 [freebsd-update(8)](http://www.freebsd.org/cgi/man.cgi?query=freebsd-update&sektion=8&manpath=freebsd-release-ports) 工具进行支持。二进制升级过程将更新未修改的用户空间工具以及未修改的 GENERIC 内核，这些内核作为官方 FreeBSD 发布的一部分分发。[freebsd-update(8)](http://www.freebsd.org/cgi/man.cgi?query=freebsd-update&sektion=8&manpath=freebsd-release-ports)工具要求被升级的主机必须具备互联网连接。

基于源代码的升级（即从源代码重新编译 FreeBSD 基础系统）也受支持，相关的说明可以在 `/usr/src/UPDATING` 中找到。

有关通过 [freebsd-update(8)](http://www.freebsd.org/cgi/man.cgi?query=freebsd-update&sektion=8&manpath=freebsd-release-ports) 进行升级的信息，请参阅安装页面中的“二进制升级部分”。

> **重要**
>
> 升级 FreeBSD 之前，请务必备份 _所有_ 数据和配置文件。

## 用户空间

本节涵盖了用户空间应用程序、贡献软件和系统实用程序的更改和新增内容。

### 用户空间配置变更

默认的 [newsyslog.conf(5)](http://www.freebsd.org/cgi/man.cgi?query=newsyslog.conf&sektion=5&manpath=freebsd-release-ports) 现在包含了 `/etc/newsyslog.conf.d/` 和 `/usr/local/etc/newsyslog.conf.d/` 目录中的文件，用于 [newsyslog(8)](http://www.freebsd.org/cgi/man.cgi?query=newsyslog&sektion=8&manpath=freebsd-release-ports)。[(r266463)](http://svn.freebsd.org/viewvc/base?view=revision&revision=266463)

[mailwrapper(8)](http://www.freebsd.org/cgi/man.cgi?query=mailwrapper&sektion=8&manpath=freebsd-release-ports) 实用程序已更新，使用 `LOCALBASE` 环境变量中的 [mailer.conf(5)](http://www.freebsd.org/cgi/man.cgi?query=mailer.conf&sektion=5&manpath=freebsd-release-ports)，如果未设置，默认值为 `/usr/local`。[(r270675)](http://svn.freebsd.org/viewvc/base?view=revision&revision=270675)

已删除 [src.conf(5)](http://www.freebsd.org/cgi/man.cgi?query=src.conf&sektion=5&manpath=freebsd-release-ports) 选项 `MK_ARM_EABI` ，现在是 FreeBSD/arm 支持的唯一 ABI。[(r272350)](http://svn.freebsd.org/viewvc/base?view=revision&revision=272350)

ntp 套件已更新至版本 4.2.8p8。[(r301247)](http://svn.freebsd.org/viewvc/base?view=revision&revision=301247)

`/etc/ntp/leap-seconds` 已更新为版本 3676752000。[(r301247)](http://svn.freebsd.org/viewvc/base?view=revision&revision=301247)

默认启用 [src.conf(5)](http://www.freebsd.org/cgi/man.cgi?query=src.conf&sektion=5&manpath=freebsd-release-ports) 选项 `WITH_SYSTEM_COMPILER` 。[(r302177)](http://svn.freebsd.org/viewvc/base?view=revision&revision=302177)

## 用户空间应用程序变更

当无法使用 [kldload(8)](http://www.freebsd.org/cgi/man.cgi?query=kldload&sektion=8&manpath=freebsd-release-ports) 加载内核模块时，现会打印一条消息，提示查看 [dmesg(8)](http://www.freebsd.org/cgi/man.cgi?query=dmesg&sektion=8&manpath=freebsd-release-ports) 的输出，而不是之前的“Exec format error.”消息。[(r260594)](http://svn.freebsd.org/viewvc/base?view=revision&revision=260594)

[pciconf(8)](http://www.freebsd.org/cgi/man.cgi?query=pciconf&sektion=8&manpath=freebsd-release-ports) 实用程序现在可以识别已附加到驱动程序的 PCI 设备，并通过设备名称而不仅仅是选择器来标识它们。此外，`-l` 标志现在接受一个可选的设备参数，以列出单个设备的详细信息。[(r260910)](http://svn.freebsd.org/viewvc/base?view=revision&revision=260910)

在 `/etc/ttys` 中新增标志 "onifconsole"。这允许系统在设备为活动内核控制台时通过串行控制台提供登录提示，否则等同于 `off`。[(r260913)](http://svn.freebsd.org/viewvc/base?view=revision&revision=260913)

已添加通过 [pciconf(8)](http://www.freebsd.org/cgi/man.cgi?query=pciconf&sektion=8&manpath=freebsd-release-ports) 显示 PCI 设备 VPD 的支持。[(r260926)](http://svn.freebsd.org/viewvc/base?view=revision&revision=260926)

[ping(8)](http://www.freebsd.org/cgi/man.cgi?query=ping&sektion=8&manpath=freebsd-release-ports) 实用程序已更新，使用 Capsicum 框架来降低权限，以防止恶意网络数据包的攻击。[(r261498)](http://svn.freebsd.org/viewvc/base?view=revision&revision=261498)

[ps(1)](http://www.freebsd.org/cgi/man.cgi?query=ps&sektion=1&manpath=freebsd-release-ports) 实用程序已更新，包含 `-J` 标志，用于通过匹配 [jail(8)](http://www.freebsd.org/cgi/man.cgi?query=jail&sektion=8&manpath=freebsd-release-ports) ID 和名称过滤输出。此外，可以使用参数 `0` 与 `-J` 一起，仅列出主机系统上运行的进程。[(r265229)](http://svn.freebsd.org/viewvc/base?view=revision&revision=265229)

[top(1)](http://www.freebsd.org/cgi/man.cgi?query=top&sektion=1&manpath=freebsd-release-ports) 实用程序已更新，以通过 [jail(8)](http://www.freebsd.org/cgi/man.cgi?query=jail&sektion=8&manpath=freebsd-release-ports) ID 或名称进行过滤，作为对 [ps(1)](http://www.freebsd.org/cgi/man.cgi?query=ps&sektion=1&manpath=freebsd-release-ports) 在 `r265229` 中更改的后续更新。[(r265249)](http://svn.freebsd.org/viewvc/base?view=revision&revision=265249)

[pmcstat(8)](http://www.freebsd.org/cgi/man.cgi?query=pmcstat&sektion=8&manpath=freebsd-release-ports) 实用程序已更新，新增标志 `-l`，它在指定的秒数后结束事件收集。[(r266209)](http://svn.freebsd.org/viewvc/base?view=revision&revision=266209)

[ps(1)](http://www.freebsd.org/cgi/man.cgi?query=ps&sektion=1&manpath=freebsd-release-ports) 实用程序已更新，新增新关键字 "tracer"，用于显示跟踪进程的 PID。[(r270745)](http://svn.freebsd.org/viewvc/base?view=revision&revision=270745)

已为 [mkimg(1)](http://www.freebsd.org/cgi/man.cgi?query=mkimg&sektion=1&manpath=freebsd-release-ports) 实用程序添加了支持添加空分区的功能。[(r271482)](http://svn.freebsd.org/viewvc/base?view=revision&revision=271482)

[primes(6)](http://www.freebsd.org/cgi/man.cgi?query=primes&sektion=6&manpath=freebsd-release-ports) 实用程序已更新，正确列出介于 `4295098369` 和 `3825123056546413050` 之间的质数。在此更改之前，可能会错误地将返回值识别为质数。[(r272166)](http://svn.freebsd.org/viewvc/base?view=revision&revision=272166)

[mkimg(1)](http://www.freebsd.org/cgi/man.cgi?query=mkimg&sektion=1&manpath=freebsd-release-ports) 实用程序已更新，包含三个选项，用于打印有关 [mkimg(1)](http://www.freebsd.org/cgi/man.cgi?query=mkimg&sektion=1&manpath=freebsd-release-ports) 本身的信息：[(r272198)](http://svn.freebsd.org/viewvc/base?view=revision&revision=272198)

| 选项 | 输出 |
| -------- | ------------------------------------------- |
| `--version`       | 当前版本的 [mkimg(1)](http://www.freebsd.org/cgi/man.cgi?query=mkimg&sektion=1&manpath=freebsd-release-ports) 实用程序 |
| `--formats`       | [mkimg(1)](http://www.freebsd.org/cgi/man.cgi?query=mkimg&sektion=1&manpath=freebsd-release-ports) 支持的磁盘映像文件格式 |
| `--schemes`       | [mkimg(1)](http://www.freebsd.org/cgi/man.cgi?query=mkimg&sektion=1&manpath=freebsd-release-ports) 支持的分区方案 |

在 [dtrace(1)](http://www.freebsd.org/cgi/man.cgi?query=dtrace&sektion=1&manpath=freebsd-release-ports) 中已添加用户空间 [ctf(5)](http://www.freebsd.org/cgi/man.cgi?query=ctf&sektion=5&manpath=freebsd-release-ports) 支持。通过此更改， [dtrace(1)](http://www.freebsd.org/cgi/man.cgi?query=dtrace&sektion=1&manpath=freebsd-release-ports) 能够解析函数和 USDT 探针参数的类型信息以及函数返回值。[(r272488)](http://svn.freebsd.org/viewvc/base?view=revision&revision=272488)

[elfdump(1)](http://www.freebsd.org/cgi/man.cgi?query=elfdump&sektion=1&manpath=freebsd-release-ports) 实用程序已更新，支持由 [capsicum(4)](http://www.freebsd.org/cgi/man.cgi?query=capsicum&sektion=4&manpath=freebsd-release-ports) 提供的能力模式。[(r274960)](http://svn.freebsd.org/viewvc/base?view=revision&revision=274960)

已新增 [fstyp(8)](http://www.freebsd.org/cgi/man.cgi?query=fstyp&sektion=8&manpath=freebsd-release-ports) 实用程序，用于确定指定设备上的文件系统。[(r275680)](http://svn.freebsd.org/viewvc/base?view=revision&revision=275680)（由 FreeBSD 基金会赞助）


