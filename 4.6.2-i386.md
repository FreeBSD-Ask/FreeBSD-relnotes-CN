# FreeBSD 4.6.2 RELEASE i386 发行公告（2002 年 8 月 15 日）

- 原文链接：[FreeBSD/i386 4.6.2-RELEASE Release Notes](https://www.freebsd.org/releases/4.6.2R/relnotes-i386/)


**FreeBSD 项目**

版权所有 © 2000, 2001, 2002 FreeBSD 文档项目

`$FreeBSD: src/release/doc/en_US.ISO8859-1/relnotes/common/new.sgml,v 1.22.2.249.2.13 2002/08/13 21:38:44 bmah Exp $`

FreeBSD 4.6.2-RELEASE 的发行说明总结了自 4.5-RELEASE 以来对 FreeBSD 基本系统所做的更改。包括内核和用户空间的更改，以及自上次发行以来发布的基本系统适用的安全公告。此外，还简要介绍了升级的相关说明。


# [1 简介]()

本文档包含 FreeBSD 4.6.2-RELEASE 在 IA-32 硬件平台上的发行说明。它描述了自 4.5-RELEASE 以来新增（或更改）的 FreeBSD 特性，并提供了从先前版本升级的一些注意事项。

FreeBSD 4.6.2-RELEASE 是一个“点发行版本”，旨在解决 FreeBSD 4.6-RELEASE 中发现的一些问题（主要与安全相关）。最初，这个版本计划命名为 4.6.1。然而，在发布工程过程中出现了若干额外问题，导致发布时间延后。为了避免混淆，发布工程和安全团队决定将开发中的版本重新命名为 4.6.2。

您可以通过 [ftp://ftp.FreeBSD.org/pub/FreeBSD/releases](ftp://ftp.freebsd.org/pub/FreeBSD/releases) 或其任意镜像站点获取此发行版。关于获取此版本（或其他版本）发行版的更多信息，请参阅 [FreeBSD 手册](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/) 中的 [“获取 FreeBSD”](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/mirrors.html) 附录。



# [2 更新内容]()

本节描述了自 4.5-RELEASE 以来 FreeBSD 中最显著的新功能或变更。通常的发行说明条目包括新驱动程序或硬件支持、新命令或选项、主要错误修复或贡献软件的更新。此外，还列出了 4.5-RELEASE 之后基础系统发布的安全公告。

与本次点发行版特定的更改相关的发行说明条目将标注为 [4.6.2]。



## [2.1 内核变更]()

新增了 [puc(4)](http://www.freebsd.org/cgi/man.cgi?query=puc&sektion=4&manpath=FreeBSD+4.6-RELEASE)（PCI “通用”通信）驱动程序，用于帮助将基于 PCI 的串口连接到 [sio(4)](http://www.freebsd.org/cgi/man.cgi?query=sio&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动。

现在可以通过 dumpdev 加载器可调参数设置内核转储设备。因此，即使在内核初始化的后期阶段（进入单用户模式之前）发生崩溃，也可以获取转储。

[snp(4)](http://www.freebsd.org/cgi/man.cgi?query=snp&sektion=4&manpath=FreeBSD+4.6-RELEASE) 设备不再是静态的，现在可以作为模块编译。

新增了 [spic(4)](http://www.freebsd.org/cgi/man.cgi?query=spic&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动，为某些索尼笔记本上的 Jog Dial 设备提供访问支持。[moused(8)](http://www.freebsd.org/cgi/man.cgi?query=moused&sektion=8&manpath=FreeBSD+4.6-RELEASE) 也新增了对此设备的支持。

新增了用于 VIA SMBus 电源管理控制器的 [viapm(4)](http://www.freebsd.org/cgi/man.cgi?query=viapm&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动。



### [2.1.1 处理器/主板支持]()

新增了 CPU\_ATHLON\_SSE\_HACK 内核选项，尝试在 BIOS 忘记启用 SSE 特性位的情况下，为较新的 Athlon CPU 启用 SSE。

在某些系统中，BIOS 未激活 PCI 设备的 I/O 端口和内存，使其无法使用。PCI\_ENABLE\_IO\_MODES 内核选项强制 FreeBSD 启用这些设备，以便使用它们。



### [2.1.2 启动加载器]()

boot2 现在支持 -n 选项，用于禁止通过按键中断启动过程。


### [2.1.3 网络接口支持]()

[an(4)](http://www.freebsd.org/cgi/man.cgi?query=an&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动现已支持 Cisco LEAP 和“Home”WEP 密钥。同时，Linux Aironet 工具现在可以在模拟模式下使用。

新增对基于 ARCNET 令牌的网络的通用支持。

添加了 `cm` 驱动程序以支持 SMC COM90cx6 ARCNET 网络适配器。

[dc(4)](http://www.freebsd.org/cgi/man.cgi?query=dc&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动现在支持 VLAN。

GENERIC 内核现在通过 [em(4)](http://www.freebsd.org/cgi/man.cgi?query=em&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动支持 Intel 千兆以太网卡，而不是 [wx(4)](http://www.freebsd.org/cgi/man.cgi?query=wx&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动，后者自 FreeBSD 4.5-RELEASE 起已被弃用。

新增 `my` 驱动以支持 Myson 快速以太网和千兆以太网适配器。

[wi(4)](http://www.freebsd.org/cgi/man.cgi?query=wi&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动现在支持基于 Prism II 和 Prism 2.5 的网卡。Prism 卡上的 104/128 位 WEP 功能现已可用。

[wi(4)](http://www.freebsd.org/cgi/man.cgi?query=wi&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动支持将 FreeBSD 主机用作无线接入点。此功能可通过 [ifconfig(8)](http://www.freebsd.org/cgi/man.cgi?query=ifconfig&sektion=8&manpath=FreeBSD+4.6-RELEASE) 的 `mediaopt hostap` 选项启用。此功能需要基于 Prism II 芯片组的无线适配器。

[wi(4)](http://www.freebsd.org/cgi/man.cgi?query=wi&sektion=4&manpath=FreeBSD+4.6-RELEASE) 驱动现在支持 **bsd-airtools**。

`xe` 驱动现在可以作为模块构建。

部分网络驱动现在实现了一种半轮询模式，使系统在应对攻击和过载时更加稳定。要启用轮询，需要在内核配置文件中加入以下选项：

```  
options DEVICE_POLLING  
options HZ=1000 # 非必需，但强烈推荐
```

随后可以通过 `kern.polling.enable` sysctl 变量激活轮询模式；`kern.polling.user_frac` sysctl 用于指示保留给用户态的 CPU 时间百分比。初步支持轮询的设备包括 [dc(4)](http://www.freebsd.org/cgi/man.cgi?query=dc&sektion=4&manpath=FreeBSD+4.6-RELEASE)、[fxp(4)](http://www.freebsd.org/cgi/man.cgi?query=fxp&sektion=4&manpath=FreeBSD+4.6-RELEASE)、[rl(4)](http://www.freebsd.org/cgi/man.cgi?query=rl&sektion=4&manpath=FreeBSD+4.6-RELEASE) 和 [sis(4)](http://www.freebsd.org/cgi/man.cgi?query=sis&sektion=4&manpath=FreeBSD+4.6-RELEASE)。更多详情可参考 [polling(4)](http://www.freebsd.org/cgi/man.cgi?query=polling&sektion=4&manpath=FreeBSD+4.6-RELEASE) 手册页。



### [2.1.4 网络协议]()

[bridge(4)](http://www.freebsd.org/cgi/man.cgi?query=bridge&sektion=4&manpath=FreeBSD+4.6-RELEASE) 现在更好地支持多个完全独立的桥接集群，并且在动态连接和断开时更稳定。此外，桥接集群也完全支持 VLAN。

修复了 IPv4 中 IPsec 处理的一个错误，该错误导致忽略了入站 SPD 检查。

新增了一个 `ng_eiface` netgraph 模块，该模块以以太网接口形式存在，但将其以太网帧传递到 Netgraph 挂钩。

新增了 [ng_etf(4)](http://www.freebsd.org/cgi/man.cgi?query=ng_etf&sektion=4&manpath=FreeBSD+4.6-RELEASE) netgraph 节点，该节点允许根据以太网类型过滤数据包到不同的挂钩。

修复了 [tcp(4)](http://www.freebsd.org/cgi/man.cgi?query=tcp&sektion=4&manpath=FreeBSD+4.6-RELEASE) 同步缓存实现中的一个错误，该错误可能导致内核崩溃。

TCP 实现现在正确忽略发送到 IP 层广播地址的数据包。



### [2.1.5 磁盘和存储]()

驱动 [ahc(4)](http://www.freebsd.org/cgi/man.cgi?query=ahc&sektion=4&manpath=FreeBSD+4.6-RELEASE) 已与截至 2002 年 4 月 29 日的 FreeBSD -CURRENT 版本同步。

驱动 [ata(4)](http://www.freebsd.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+4.6-RELEASE) 已与截至 2002 年 3 月 18 日的 FreeBSD -CURRENT 版本同步。

[4.6.2] 修复了 [ata(4)](http://www.freebsd.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+4.6-RELEASE) 标记队列在某些情况下无法正常工作的错误。

驱动 [ata(4)](http://www.freebsd.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+4.6-RELEASE) 现在支持在 [atacontrol(8)](http://www.freebsd.org/cgi/man.cgi?query=atacontrol&sektion=8&manpath=FreeBSD+4.6-RELEASE) 的控制下创建、删除、查询和重建 ATA RAID。

[4.6.2] 驱动 [ata(4)](http://www.freebsd.org/cgi/man.cgi?query=ata&sektion=4&manpath=FreeBSD+4.6-RELEASE) 现在能够正确计算最大传输大小。这修复了在访问某些 ATA 设备时发生的许多 `READ_BIG` 和其他错误。


